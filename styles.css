body {
    font-family: Arial, sans-serif;
    background: #f0f5ff;
    margin: 0;
    padding: 15px; /* Adjusted padding */
    min-height: 100vh;
}

#dropZone {
    width: 90%; /* Adjusted width */
    max-width: 550px; /* Adjusted max-width */
    min-height: 200px;
    margin: 20px auto;
    border: 3px dashed #4a90e2;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    background: white;
    transition: all 0.3s ease;
}

#dropZone.dragover {
    background: #e1edff;
    border-color: #2563eb;
    transform: scale(1.02);
}

#linksList {
    width: 90%; /* Adjusted width */
    max-width: 550px; /* Adjusted max-width */
    margin: 20px auto;
    padding: 0;
    list-style: none;
}

.link-item {
    background: white;
    margin: 10px 0;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        transform: translateX(-20px);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.link-icon {
    margin-right: 15px;
    color: #4a90e2;
}

.link-text {
    color: #2563eb;
    text-decoration: none;
    flex-grow: 1;
}

.link-text:hover {
    text-decoration: underline;
}

.link-actions {
    display: flex;
    gap: 10px;
}

.action-button {
    padding: 5px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.2s ease;
}

.copy-button,
.copy-content-button {
    background: #4CAF50;
    color: white;
}

.delete-button {
    background: #f44336;
    color: white;
}

.action-button:hover {
    opacity: 0.9;
}

h1 {
    text-align: center;
    color: #2563eb;
    margin-bottom: 30px;
}

#parseButton,
#deepParseButton,
#copyAllButton,
#stopParseButton,
#scanButton,
#stopScanButton,
#fetchPapersButton,
#searchPapersButton, /* Added searchPapersButton here for consistent desktop button styling */
#summarizeButton,
#selectAllButton,
.pagination-button, /* Added pagination-button for consistent desktop styling */
#addPatternLinksButton {
    display: inline-block;
    margin: 10px 5px; /* Unified margin for these action buttons on desktop */
    padding: 10px 20px;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s ease;
}

#parseButton:hover,
#deepParseButton:hover,
#copyAllButton:hover,
#stopParseButton:hover,
#scanButton:hover,
#stopScanButton:hover,
#fetchPapersButton:hover,
#searchPapersButton:hover, /* Added hover style for searchPapersButton */
.pagination-button:not(:disabled):hover, /* Added hover style for pagination-button */
#summarizeButton:hover,
#selectAllButton:hover,
#addLinkButton:hover,
#addPatternLinksButton:hover {
    background: #357abd;
}

/* Ensure #searchInput (which has pattern-link-input) has margin consistent with buttons in #topicSection */
#topicSection .pattern-link-input { /* More specific selector for #searchInput */
    margin-top: 10px; /* Add top margin for desktop */
    margin-bottom: 10px; /* Add bottom margin for desktop, matching button vertical rhythm */
}

.button-container {
    text-align: center;
}



@keyframes pulse {
    0% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }

    100% {
        opacity: 1;
    }
}

.parsing-status,
.scanning-status {
    margin: 20px auto;
    width: 90%; /* Adjusted width */
    max-width: 550px; /* Adjusted max-width */
    padding: 15px;
    background: white;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.progress-item {
    margin: 5px 0;
    padding: 5px;
    border-radius: 3px;
    background: #f5f5f5;
}

.progress-item.done {
    background: #e8f5e9;
}

.parsed-content,
.vulnerability-item {
    font-family: monospace;
    white-space: pre-wrap;
    background: #f5f5f5;
    padding: 15px;
    border-radius: 5px;
    line-height: 1.6;
}

.markdown-content {
    line-height: 1.6;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    white-space: normal !important;
}

.markdown-content h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

.markdown-content h2 {
    font-size: 1.5em;
    margin: 0.75em 0;
}

.markdown-content h3 {
    font-size: 1.17em;
    margin: 0.83em 0;
}

.markdown-content p {
    margin: 1em 0;
}

.markdown-content ul {
    margin: 1em 0;
    padding-left: 40px;
}

.markdown-content li {
    margin: 0.5em 0;
}

.markdown-content code {
    background: #f5f5f5;
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-family: monospace;
}


.filter-settings,
.source-code-settings,
.pattern-input-container,
#topicSection,
#resultsSection,
#paperSelectionSection,
#modeSection {
    width: 90%; /* Adjusted width */
    max-width: 550px; /* Adjusted max-width */
    margin: 20px auto;
    padding: 15px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.toggle-container {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin: 15px 0;
}

.switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
}

.switch input { 
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
}

input:checked + .slider {
    background-color: #2563eb;
}

input:checked + .slider:before {
    transform: translateX(26px);
}

.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}

.toggle-label {
    font-weight: 500;
    color: #2563eb;
}

.settings-container {
    margin: 20px 0;
}

.setting-item {
    margin: 10px 0;
}

.add-link-container {
    width: 90%; /* Adjusted width */
    max-width: 550px; /* Adjusted max-width */
    margin: 20px auto;
    display: flex;
    gap: 10px;
}

.pattern-link-input,
.pattern-count-input,
#topicSelect,
#styleSelect {
    flex-grow: 1;
    padding: 10px;
    border: 1px solid #4a90e2;
    border-radius: 4px;
}

.link-input {
    width:80%;
    max-width: 600px;
    height: 34px;
    padding: 6px 12px;
    border-width: 1px;
}

.pattern-link-input,
#topicSelect,
#styleSelect{
    width: calc(100% - 22px);
    margin-bottom: 10px;
    background-color: white;
    appearance: none;
}
.pattern-count-input{
    width: 60px;
    margin-bottom: 10px;
}
.select-wrapper {
    position: relative;
    display: inline-block;
    width: 100%;
}

.select-wrapper::after {
    content: 'â–¼';
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    pointer-events: none;
}


.edit-mode .link-text {
    display: none;
}

.edit-mode .link-edit-input {
    display: block;
    flex-grow: 1;
    padding: 5px;
    margin-right: 10px;
}

.link-edit-input {
    display: none;
}


.pattern-input-label {
    display: block;
    margin-bottom: 10px;
    color: #2563eb;
}


.add-pattern-links-button {
    padding: 10px 20px;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.add-pattern-links-button:hover {
    background: #357abd;
}
.section-title {
    color: #2563eb;
    margin-top: 0;
}
#textContent, #scanResults, #summaries, .vulnerability-item {
    width: 90%; /* Adjusted width */
    max-width: 550px; /* Adjusted max-width */
    margin: 20px auto;
    max-height: 500px;
    overflow-y: auto;
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: white;
}
#summaries {
    display: none;
}
.summary-item {
    margin-bottom: 20px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 20px;
}


.summary-title {
    font-weight: bold;
}

.summary-content {
    margin-top: 10px;
    line-height: 1.6;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}
.mode-button {
    padding: 10px 20px;
    margin: 5px;
    background-color: #f8f9fa;
    border: 1px solid #ddd;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.mode-button:hover {
    background-color: #e2e6ea;
}

.mode-button.active {
    background-color: #4a90e2;
    color: white;
    border-color: #4a90e2;
}
.mode-button.active:hover {
    background-color: #357abd;
}
.paper-button {
    display: block;
    width: 100%;
    margin-bottom: 10px;
    padding: 10px;
    background: #e0e0e0;
    color: #333;
    border: none;
    border-radius: 5px;
    text-align: left;
    cursor: pointer;
    transition: background 0.3s ease;
}

.paper-button.selected {
    background: #4a90e2;
    color: white;
}

.paper-button:hover {
    background: #b0c4de;
}
.token-count {
    text-align: center;
    margin-top: 10px;
    font-size: 0.9em;
    color: #777;
}

/* Loading Animation Styles */
.loading-overlay {
    position: fixed; /* Full-screen overlay */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000; /* Ensure it's on top */
}

.loader {
    border: 8px solid #f3f3f3; /* Light grey */
    border-top: 8px solid #4a90e2; /* Blue */
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Media Queries for Mobile Responsiveness */
@media (max-width: 768px) {
    body {
        padding: 10px; /* Further reduce padding for small screens */
    }

    h1 {
        font-size: 1.8em; /* Slightly smaller H1 for mobile */
        margin-bottom: 20px;
    }

    #dropZone,
    #linksList,
    .parsing-status,
    .scanning-status,
    .filter-settings,
    .source-code-settings,
    .pattern-input-container,
    #topicSection,
    #resultsSection,
    #paperSelectionSection,
    #modeSection,
    #textContent,
    #scanResults,
    #summaries,
    .vulnerability-item,
    .add-link-container,
    .settings-container {
        width: 95%; /* Use more screen width on mobile */
        max-width: 100%; /* Allow full width */
        margin-left: auto;
        margin-right: auto;
    }

    .button-container {
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    #parseButton,
    #deepParseButton,
    #copyAllButton,
    #stopParseButton,
    #scanButton,
    #stopScanButton,
    #fetchPapersButton,
    #summarizeButton,
    #selectAllButton,
    #addPatternLinksButton,
    .action-button { /* General styling for primary action buttons */
        padding: 12px 10px; /* Comfortable touch targets */
        font-size: 1em;
        display: block;
        width: 100%;
        margin: 10px 0; /* Stack buttons with some space */
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }
    
    /* Specific override for smaller action buttons if needed, otherwise the above general one applies */
    .link-actions .action-button {
        padding: 10px 5px; /* Slightly smaller padding if they were too big from the general rule */
    }

    .toggle-container {
        margin-bottom: 10px; /* Space before stacked buttons */
        display: flex; /* Ensure items are in a row */
        justify-content: center; /* Center the toggle switch */
        align-items: center;
    }

    .add-link-container {
        flex-direction: column; /* Stack input and button */
    }

    .add-link-container .link-input,
    .add-link-container .action-button { /* #addLinkButton is covered by .action-button */
        width: 100%;
        margin-left: 0;
        margin-right: 0;
        margin-bottom: 10px; /* Space between stacked items */
        box-sizing: border-box;
    }
    .add-link-container .action-button:last-child {
        margin-bottom: 0; /* No margin for the last item */
    }


    .pattern-input-container input,
    .pattern-input-container button { /* This covers #addPatternLinksButton */
        width: 100%;
        margin-left: 0;
        margin-right: 0;
        margin-bottom: 10px;
        box-sizing: border-box;
    }
    .pattern-input-container button:last-child,
    .pattern-input-container input:last-child {
        margin-bottom: 0;
    }
    
    .pattern-count-input { /* Was previously more specific */
        width: 100% !important; /* Override previous inline-style-like specificity */
    }

    .link-item {
        flex-direction: column; /* Stack icon/text and actions */
        align-items: flex-start; /* Align items to the start */
    }
    
    .link-icon {
        margin-bottom: 10px; /* Space between icon and text/actions */
    }

    .link-text {
        word-break: break-all; /* Prevent long URLs from overflowing */
        margin-bottom: 10px; /* Space between text and actions */
    }
    
    .link-edit-input {
        width: 100%;
        box-sizing: border-box;
        margin-bottom: 10px;
    }

    .link-actions {
        flex-direction: column; /* Stack action buttons */
        width: 100%; /* Make action buttons take full width */
        margin-top: 10px; /* Space between link text and action buttons */
    }

    .link-actions .action-button {
        width: 100%;
        margin-left: 0; /* Reset any specific margins if they existed */
        margin-right: 0;
        margin-bottom: 5px; /* Space between stacked action buttons */
        box-sizing: border-box;
    }
    .link-actions .action-button:last-child {
        margin-bottom: 0;
    }

    /* Research.html specific adjustments */
    #modeButtons .mode-button {
        display: block;
        width: 100%;
        margin: 5px 0; /* Vertical stacking with space */
        box-sizing: border-box;
    }

    .pro-mode-buttons {
        flex-direction: column; /* Stack Pro mode buttons */
        align-items: stretch; /* Make buttons take full width */
    }

    .pro-mode-buttons .pro-mode-button {
        width: 100%;
        margin: 5px 0; /* Vertical stacking with space */
        box-sizing: border-box;
    }
    
    /* Ensure select elements are usable on mobile */
    #topicSelect,
    #styleSelect,
    #searchInput { /* Apply mobile styling to searchInput as well */
        width: 100%; /* Full width */
        padding: 12px 10px; /* Comfortable touch targets */
        font-size: 1em;
        box-sizing: border-box;
        margin-left: 0; /* Override any specific desktop margins */
        margin-right: 0; /* Override any specific desktop margins */
    }
    
    .select-wrapper::after { /* Adjust dropdown arrow position if needed due to padding changes */
        top: 50%; 
        right: 15px; /* Ensure it's not too close to the edge */
    }

    /* Ensure search button stacks correctly on mobile */
    #searchPapersButton {
        margin-top: 0; /* Reset desktop margin if #searchInput provides bottom margin */
        /* It already gets display: block and width: 100% from the .action-button rule in media query */
    }

    /* Pagination specific styles for mobile */
    .pagination-controls {
        margin-top: 15px;
        margin-bottom: 15px;
        display: flex; /* Use flexbox for better alignment */
        justify-content: center; /* Center items */
        align-items: center; /* Align items vertically */
    }

    .pagination-button {
        margin-left: 5px !important; 
        margin-right: 5px !important;
        width: auto !important; /* Override full-width from general .action-button on mobile */
        display: inline-block !important; /* Override block from general .action-button on mobile */
        padding: 10px 12px !important; /* Slightly smaller padding for prev/next buttons */
        font-size: 0.9em !important; /* Slightly smaller font */
    }
    
    .pagination-button:disabled {
        background-color: #ccc !important; /* Ensure disabled style is clear */
        cursor: not-allowed !important;
        opacity: 0.7 !important;
    }

    .pagination-info {
        display: inline-block;
        margin: 0 8px !important; /* Adjust margin for mobile */
        font-weight: bold;
        font-size: 0.9em; /* Match button font size */
        color: #333;
    }
}
/* General Pagination Styles (Desktop and Mobile) */
.pagination-controls {
    text-align: center;
    margin-top: 20px; /* Space above pagination controls */
    margin-bottom: 10px; /* Space below pagination controls */
}

.pagination-button:disabled {
    background-color: #ccc; /* Standard disabled style */
    cursor: not-allowed;
    opacity: 0.6;
}

.pagination-button:disabled:hover {
    background-color: #ccc; /* Keep disabled style on hover */
    opacity: 0.6;
}


.pagination-info {
    display: inline-block; /* Keep inline for desktop if not overridden by mobile */
    margin: 0 15px; /* Desktop margin */
    font-weight: bold;
    color: #333; /* Darker text for better readability */
}

#abstractPopup {
    display: none; /* Initially hidden */
    position: absolute; /* Positioned by JS */
    border: 1px solid #b0c4de; /* Softer border */
    background-color: #f9f9f9; /* Light background */
    padding: 15px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    z-index: 1001; /* Above other content but below critical alerts if any */
    max-width: 400px;
    max-height: 300px;
    overflow-y: auto;
    font-size: 0.9em; /* Slightly smaller text for popup */
    line-height: 1.4;
    word-wrap: break-word; /* Ensure long words don't break layout */
    border-radius: 6px; /* Rounded corners */
}